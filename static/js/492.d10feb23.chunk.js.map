{"version":3,"file":"static/js/492.d10feb23.chunk.js","mappings":"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","sources":["components/shared-components/RedirectToPage.js","pages/ResetPassword.js"],"sourcesContent":["import React from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst RedirectToPage = ({ url = '/', seconds = '3000' }) => {\r\n  const navigate = useNavigate();\r\n  const timer = setTimeout(() => {\r\n    navigate(`${url}`);\r\n  }, seconds);\r\n  return () => {\r\n    clearTimeout(timer);\r\n  };\r\n};\r\n\r\nexport default RedirectToPage;\r\n","import axios from 'axios';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport Loading from '../components/shared-components/Loading';\r\nimport Message from '../components/shared-components/Message';\r\nimport RedirectToPage from '../components/shared-components/RedirectToPage';\r\nimport { useUserContext } from '../contexts/UserProvider';\r\nimport { new_pass_url } from '../utils/constants';\r\n\r\nconst ResetPassword = () => {\r\n  const { idreset } = useParams();\r\n  const { handleLoading, isLoading } = useUserContext();\r\n  const [formValues, setFormValues] = useState({\r\n    password: '',\r\n    conPassword: '',\r\n  });\r\n  const [formErrors, setFormErrors] = useState({});\r\n  const [isSubmit, setIsSubmit] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n  const { password, conPassword } = formValues;\r\n  const makeRequest = async () => {\r\n    handleLoading(true);\r\n    try {\r\n      const response = await axios.post(\r\n        new_pass_url,\r\n        JSON.stringify({\r\n          new_password_one: formValues.password,\r\n          new_password_two: formValues.conPassword,\r\n          id: idreset,\r\n        }),\r\n        {\r\n          headers: { 'Content-Type': 'application/json' },\r\n        }\r\n      );\r\n      handleLoading(false);\r\n      setSuccess(true);\r\n    } catch (error) {\r\n      handleLoading(false);\r\n      if (error.response?.status === 422) {\r\n        setFormErrors({\r\n          ...formErrors,\r\n          emailError: 'الإيميل غير موجود بالخدمة',\r\n        });\r\n      } else {\r\n        setFormErrors({\r\n          ...formErrors,\r\n          anotherError: 'خطأ ما حدث حاول مرة أخري',\r\n        });\r\n      }\r\n\r\n      // setFormErrors({...formErrors,})\r\n      // console.log(error);\r\n    }\r\n  };\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setFormErrors(validateForm(formValues));\r\n    setIsSubmit(true);\r\n  };\r\n  useEffect(() => {\r\n    if (Object.keys(formErrors).length === 0 && isSubmit) {\r\n      makeRequest();\r\n    }\r\n  }, [formErrors]);\r\n  const validateForm = (val) => {\r\n    const errors = {};\r\n    if (!formValues.password) {\r\n      errors.passwordError = 'من فضلك أدخل الباسورد';\r\n    }\r\n    if (!formValues.conPassword) {\r\n      errors.passwordConError = 'أعد كتابة الباسورد';\r\n    } else if (formValues.password !== formValues.conPassword) {\r\n      errors.notIdenticalError = 'الباسورد غير متطابقتان';\r\n    }\r\n\r\n    return errors;\r\n  };\r\n  if (isLoading) {\r\n    return <Loading />;\r\n  }\r\n  if (success) {\r\n    return (\r\n      <>\r\n        <Message textMsg='تم إعادة  تعيين كلمة السر بنجاح سجل دخولك من جديد' />\r\n        <RedirectToPage />;\r\n      </>\r\n    );\r\n  }\r\n  return (\r\n    <main className='login mx-3'>\r\n      <form\r\n        className='box icon-box w-50 position-relative mx-auto mt-4'\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <input\r\n          className='form-control form-control-lg mt-4 '\r\n          type='password'\r\n          name='password'\r\n          value={password}\r\n          placeholder='كلمة السر'\r\n          autoComplete='new-password'\r\n          onChange={(e) =>\r\n            setFormValues({ ...formValues, password: e.target.value })\r\n          }\r\n        />\r\n        {formErrors.passwordError && (\r\n          <p className='text-danger mt-2'>{formErrors.passwordError}</p>\r\n        )}\r\n        <input\r\n          className='form-control form-control-lg mt-4 '\r\n          type='password'\r\n          name='conPassword'\r\n          value={conPassword}\r\n          placeholder='تأكيد كلمة السر'\r\n          autoComplete='new-password'\r\n          onChange={(e) =>\r\n            setFormValues({ ...formValues, conPassword: e.target.value })\r\n          }\r\n        />\r\n        {formErrors.passwordConError && (\r\n          <p className='text-danger mt-2'>{formErrors.passwordConError}</p>\r\n        )}\r\n        {formErrors.notIdenticalError && (\r\n          <p className='text-danger mt-2'>{formErrors.notIdenticalError}</p>\r\n        )}\r\n        {formErrors.emailError && (\r\n          <p className='text-danger mt-2'>{formErrors.emailError}</p>\r\n        )}\r\n        {formErrors.anotherError && (\r\n          <p className='text-danger mt-2'>{formErrors.anotherError}</p>\r\n        )}\r\n        <div className='text-center my-3'>\r\n          <button\r\n            className='btn btn-light text-primary w-50 fs-6 fw-bold'\r\n            type='submit'\r\n          >\r\n            إعادة تعيين\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default ResetPassword;\r\n"],"names":["_ref","_ref$url","url","_ref$seconds","seconds","navigate","useNavigate","timer","setTimeout","concat","clearTimeout","idreset","useParams","_useUserContext","useUserContext","handleLoading","isLoading","_useState","useState","password","conPassword","_useState2","_slicedToArray","formValues","setFormValues","_useState3","_useState4","formErrors","setFormErrors","_useState5","_useState6","isSubmit","setIsSubmit","_useState7","_useState8","success","setSuccess","makeRequest","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_error$response","wrap","_context","prev","next","axios","post","new_pass_url","JSON","stringify","new_password_one","new_password_two","id","headers","sent","t0","response","status","_objectSpread","emailError","anotherError","stop","apply","arguments","useEffect","Object","keys","length","validateForm","val","errors","passwordError","notIdenticalError","passwordConError","_jsx","Loading","_jsxs","_Fragment","children","Message","textMsg","RedirectToPage","className","onSubmit","e","preventDefault","type","name","value","placeholder","autoComplete","onChange","target"],"sourceRoot":""}