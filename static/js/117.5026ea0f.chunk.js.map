{"version":3,"file":"static/js/117.5026ea0f.chunk.js","mappings":"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","sources":["components/home/Ad.js","components/shared-components/RequestError.js","hooks/useScript.js","components/home/HomeAds.js","pages/Home.js"],"sourcesContent":["import React, { useState } from 'react';\nimport view from '../../assets/ICONs/view.png';\nimport pin from '../../assets/ICONs/pin.png';\nimport heart2 from '../../assets/ICONs/heart2.png';\nimport heart from '../../assets/ICONs/heart.png';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { image_url, video_url } from '../../utils/constants';\nimport { useMainContext } from '../../contexts/MainProvider';\nimport { useAdsContext } from '../../contexts/AdsProvider';\n\nimport ShareBox from './ShareBox';\nconst Ad = ({\n  id,\n  title,\n  price,\n  location,\n  created_at,\n  User,\n  AdWatch,\n  advertisement_attachements: [a],\n  grid,\n  prevLink = 'default',\n  cover_photo,\n}) => {\n  const { token, favAdsIds, handleFavouriteAd } = useAdsContext();\n  const { currency } = useMainContext();\n  const [showMsg, setShowMsg] = useState(false);\n  // var dte = created_at;\n  // var today = new Date(dte);\n  // var d = today.getFullYear();\n  var dte = created_at;\n  var today = new Date(dte);\n  var d =\n    today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate();\n  const navigate = useNavigate();\n  const handleClick = (e) => {\n    if (!e.target.classList.contains('heart')) {\n      navigate(`/singleproduct/${id}`, { prevLink });\n    }\n  };\n  const renderedPrice = price && price.toLocaleString();\n\n  return (\n    <div className={grid}>\n      <div className='card h-100'>\n        {a && a.files.split('.').pop() == 'mp4' ? (\n          cover_photo && cover_photo.includes('/uploads') ? (\n            <Link\n              className='img bg-info w-100  text-center'\n              to={`/singleproduct/${id}`}\n              state={prevLink.pathname ? prevLink.pathname : null}\n              style={{\n                backgroundImage: `${cover_photo && image_url + cover_photo}`,\n                backgroundSize: 'cover',\n              }}\n            >\n              <img\n                src={`${cover_photo && image_url + cover_photo}`}\n                className='card-img-top image-card '\n                alt='img1'\n                loading='lazy'\n              />\n            </Link>\n          ) : (\n            <Link\n              className='img bg-info w-100  text-center'\n              to={`/singleproduct/${id}`}\n              state={prevLink.pathname ? prevLink.pathname : null}\n            >\n              <div className='video-upload w-100'>\n                <video\n                  controls='controls'\n                  src={`${video_url}${a.files}`}\n                  className='w-100 h-100'\n                  loading='lazy'\n                ></video>\n              </div>\n            </Link>\n          )\n        ) : (\n          <Link\n            className='img bg-info w-100  text-center'\n            to={`/singleproduct/${id}`}\n            state={prevLink.pathname ? prevLink.pathname : null}\n          >\n            <img\n              src={`${a && image_url + a.files}`}\n              className='card-img-top image-card '\n              alt='img1'\n            />\n          </Link>\n        )}\n\n        {/* start card */}\n        <div className='py-2 px-2  d-flex flex-sm-nowrap  justify-content-between align-items-center w-100 gap-2'>\n          <h6>{title}</h6>\n          <h6 className='text-secondary'>\n            {/* {price} */}\n            {renderedPrice}\n\n            <span className='text-primary'>{currency}</span>\n          </h6>\n          {/* <ShareBox\n                url={`https://adsapp.org/#/singleproduct/${id}`}\n                quote={title}\n              /> */}\n        </div>\n        <div className='px-2 d-flex align-items-start align-items-sm-center flex-column flex-sm-row text-decoration-none '>\n          <Link\n            className='d-flex flex-row flex-sm-column align-items-center gap-3 text-decoration-none'\n            to={`/seller/${User.id}`}\n          >\n            <img\n              src={User.image && `${image_url}${User.image}`}\n              alt='person'\n              className='rounded-circle avatar'\n            />\n            <span className='text-nowrap'>\n              {User.name.length > 10\n                ? User.name.slice(0, 10) + '...'\n                : User.name}\n            </span>\n          </Link>\n          <div\n            className='w-100 me-2  text-decoration-none pointer'\n            onClick={handleClick}\n          >\n            <div className='d-flex justify-content-start align-items-start w-100 mt-2'>\n              <address className='text-primary info ms-2'>\n                <img\n                  src={pin}\n                  alt='pination'\n                  className='very-small-icon ms-1'\n                />\n                {location.length > 10\n                  ? location.slice(0, 10) + '...'\n                  : location}\n              </address>\n              <span className='text-primary info'>\n                <img src={view} alt='view' className='very-small-icon ms-1' />\n                {AdWatch && AdWatch}\n              </span>\n            </div>\n          </div>\n        </div>\n        <img\n          src={favAdsIds.includes(id) ? heart2 : heart}\n          alt='heart'\n          className='position-absolute heart pointer'\n          onClick={() => handleFavouriteAd(id)}\n        />\n        <Link\n          className='text-muted text-center pb-3 text-decoration-none'\n          to={`/singleproduct/${id}`}\n          state={prevLink.pathname ? prevLink.pathname : null}\n        >\n          تاريخ النشر {d}\n        </Link>\n      </div>\n\n      {/* end card */}\n    </div>\n  );\n};\n\nexport default Ad;\n","import React from 'react';\r\n\r\nconst RequestError = () => {\r\n  return <h6 className='text-primary text-center'>حدث خطأ ما حاول مرة أخري</h6>;\r\n};\r\n\r\nexport default RequestError;\r\n","import { useEffect } from 'react';\r\n\r\nconst useScript = (url) => {\r\n  useEffect(() => {\r\n    const script = document.createElement('script');\r\n\r\n    script.src = url;\r\n    script.async = true;\r\n\r\n    document.body.appendChild(script);\r\n\r\n    return () => {\r\n      document.body.removeChild(script);\r\n    };\r\n  }, [url]);\r\n};\r\n\r\nexport default useScript;\r\n","import React, { useEffect, useState } from 'react';\nimport Loading from '../shared-components/Loading';\nimport { useAdsContext } from '../../contexts/AdsProvider';\nimport Ad from './Ad';\nimport { useMainContext } from '../../contexts/MainProvider';\nimport RequestError from '../shared-components/RequestError';\nimport { useQuery } from 'react-query';\nimport {\n  allAdsUrl,\n  paid_package_url,\n  premium_ads_url,\n  special_ads_url,\n} from '../../utils/constants';\nimport axios from 'axios';\nimport { GET_ALLADS_SUCCESS, GET_MORE_ADS } from '../../actions';\n\nconst HomeNotSigned = () => {\n  const { countryName } = useMainContext();\n  const {\n    dispatch,\n    allAds,\n    currentPage,\n    isSpecial,\n    lastPagePaidPackage,\n    lastPageSpecial,\n    lastPage,\n    isFree,\n    isPaidPackage,\n    turnToSpecial2,\n    turnToPaidPackage2,\n    turnToFree2,\n    fetchMoreAds,\n    moreAdsLoading,\n  } = useAdsContext();\n  const [special, setSpecial] = useState(false);\n  const [paid, setPaid] = useState(false);\n  const [free, setFree] = useState(false);\n  // const [a, setA] = useState([]);\n  const [fetch, setFetch] = useState(false);\n\n  const handleAdMore = () => {\n    if (lastPage == currentPage - 1) {\n      //   dispatch change isSpecial :true and currentPage = 1 and lastPage : 'as'\n      return turnToSpecial2();\n    } else {\n      if (lastPageSpecial == currentPage - 1) {\n        return turnToPaidPackage2();\n      } else if (lastPagePaidPackage == currentPage - 1 && allAds.length < 50) {\n        return turnToFree2();\n      } else {\n        return fetchMoreAds();\n      }\n    }\n  };\n\n  // // Fetch Moore Ads\n  // const fetchMoreAds = () => {\n  //   if (isSpecial) {\n  //     // special\n  //     const response = axios\n  //       .get(`${special_ads_url}${countryName}?page=1`)\n  //       .then((data) => {\n  //         console.log('admore special');\n  //         setSpecial(true);\n  //         dispatch({\n  //           type: GET_MORE_ADS,\n  //           payload: data.data.data.data,\n  //           payload2: currentPage + 1,\n  //         });\n  //         return data;\n  //       });\n  //     return response;\n  //   } else if (isPaidPackage) {\n  //     const response = axios\n  //       .get(`${paid_package_url}${countryName}?page=${currentPage}`)\n  //       .then((data) => {\n  //         console.log('admore paidpackage');\n  //         dispatch({\n  //           type: GET_MORE_ADS,\n  //           payload: data.data.data.data,\n  //           payload2: currentPage + 1,\n  //         });\n  //         return data;\n  //       });\n  //     return response;\n  //   } else if (isFree) {\n  //     if (allAds.length < 50) {\n  //       const response = axios\n  //         .get(`${allAdsUrl}${countryName}?page=${currentPage}`)\n  //         .then((data) => {\n  //           console.log('admore free');\n  //           dispatch({\n  //             type: GET_MORE_ADS,\n  //             payload: data.data.data.data.slice(0, 50 - allAds.length),\n  //             payload2: currentPage + 1,\n  //           });\n  //           return data;\n  //         });\n  //       return response;\n  //     }\n  //   } else {\n  //     // prem\n  //     const response = axios\n  //       .get(`${premium_ads_url}${countryName}?page=${currentPage}`)\n  //       .then((data) => {\n  //         console.log('admore else');\n  //         dispatch({\n  //           type: GET_MORE_ADS,\n  //           payload: data.data.data.data,\n  //           payload2: currentPage + 1,\n  //         });\n  //         return data;\n  //       });\n  //     return response;\n  //   }\n  // };\n  const fetchAllAds = () => {\n    const response = axios\n      .get(`${premium_ads_url}${countryName}?page=1`)\n      .then((data) => {\n        if (data.data.data.data.length < 20) {\n          console.log('prem');\n          setSpecial(true);\n          dispatch({\n            type: GET_ALLADS_SUCCESS,\n            payload: [],\n            payload2: data.data.data.meta.last_page,\n          });\n          return data;\n        }\n      });\n\n    return response;\n  };\n  const turnToSpecial = () => {\n    const response = axios\n      .get(`${special_ads_url}${countryName}?page=1`)\n      .then((data) => {\n        if (data.data.data.data.length == 0) {\n          console.log('special');\n          setPaid(true);\n          dispatch({\n            type: 'TURN_TO_SPECIAL',\n            payload: data.data.data.meta.last_page,\n          });\n          dispatch({\n            type: GET_MORE_ADS,\n            payload: [],\n            payload2: 2,\n          });\n          return data;\n        }\n      });\n    return response;\n  };\n  const turnToPaidPackage = () => {\n    const response = axios\n      .get(`${paid_package_url}${countryName}?page=1`)\n      .then((data) => {\n        if (data.data.data.data.length == 0) {\n          console.log(`paid `);\n          setFree(true);\n          dispatch({\n            type: 'TURN_TO_PAID_PACKAGE',\n            payload: data.data.data.meta.last_page,\n          });\n\n          dispatch({\n            type: GET_MORE_ADS,\n            payload: [],\n            payload2: 2,\n          });\n          return data;\n        }\n      });\n    return response;\n  };\n  const turnToFree = () => {\n    const response = axios\n      .get(`${allAdsUrl}${countryName}?page=${1}`)\n      .then((data) => {\n        dispatch({\n          type: 'TURN_TO_FREE',\n          payload: data.data.data.meta.last_page,\n        });\n        dispatch({\n          type: GET_MORE_ADS,\n          payload: [],\n          payload2: 2,\n        });\n        return data;\n      });\n\n    console.log(`free`);\n    return response;\n  };\n\n  const {\n    isLoading: load,\n    isError: err,\n    data: prem,\n    error,\n  } = useQuery('ads', fetchAllAds, {\n    staleTime: 12000,\n  });\n\n  const {\n    isLoading: load2,\n    isError: err2,\n    data: sp,\n    error: error2,\n  } = useQuery('adsspecial', turnToSpecial, {\n    enabled: special,\n    staleTime: 12000,\n  });\n  const {\n    isLoading: load3,\n    isError: err3,\n    data: pa,\n    error: error3,\n  } = useQuery('adspaid', turnToPaidPackage, {\n    enabled: paid,\n    staleTime: 12000,\n  });\n\n  const {\n    isLoading: load4,\n    isError: err4,\n    data: fr,\n    error: error4,\n  } = useQuery('adsfree', turnToFree, {\n    enabled: free,\n    staleTime: 12000,\n  });\n\n  // const handleClick = () => {\n  //   setFetch(true);\n  //   refetch();\n  // };\n  // const {\n  //   isLoading: load5,\n  //   isError: err5,\n  //   data: admoreads,\n  //   error: error5,\n  //   refetch,\n  // } = useQuery('admoreads', handleAdMore, {\n  //   enabled: fetch,\n  //   refetchOnWindowFocus: false,\n  // });\n  // useEffect(() => {\n  //   if (admoreads?.data.data.data.length > 0) {\n  //     setA([...a, ...admoreads?.data.data.data]);\n  //   }\n  // }, [admoreads]);\n  if (load || load2 || load3 || load4) {\n    return <Loading />;\n  }\n  if (err || err2 || err3 || err4) {\n    return <h2>error</h2>;\n  }\n\n  const allfree = fr?.data.data.data.slice(\n    0,\n    50 -\n      (prem?.data.data.data.length +\n        sp?.data.data.data.length +\n        pa?.data.data.data.length)\n  );\n\n  return (\n    <section className='home-not-signed color-in-background py-3'>\n      <div className='container-fluid'>\n        <h3 className='py-4 ps-2 text-primary'>اعلانات جديدة</h3>\n        <div className='row g-1 gy-2 mx-1'>\n          <>\n            {prem?.data.data.data.map((ad, index) => {\n              return (\n                <Ad {...ad} key={index} grid='col-md-6 col-lg-4 col-xl-3 ' />\n              );\n            })}\n            {sp?.data.data.data.map((ad, index) => {\n              return (\n                <Ad {...ad} key={index} grid='col-md-6 col-lg-4 col-xl-3 ' />\n              );\n            })}\n            {pa?.data.data.data.map((ad, index) => {\n              return (\n                <Ad {...ad} key={index} grid='col-md-6 col-lg-4 col-xl-3 ' />\n              );\n            })}\n            {allfree.map((ad, index) => {\n              return (\n                <Ad {...ad} key={index} grid='col-md-6 col-lg-4 col-xl-3 ' />\n              );\n            })}\n            {allAds?.map((ad, index) => {\n              return (\n                <Ad {...ad} key={index} grid='col-md-6 col-lg-4 col-xl-3 ' />\n              );\n            })}\n\n            <div className='text-center mt-3'>\n              {moreAdsLoading && <Loading />}\n              <button\n                className='btn btn-light text-secondary fs-5 fw-bold px-4'\n                onClick={handleAdMore}\n              >\n                المزيد\n              </button>\n            </div>\n          </>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default HomeNotSigned;\n","import { async } from '@firebase/util';\nimport React, { useEffect } from 'react';\nimport HomeAds from '../components/home/HomeAds';\nimport Footer from '../components/shared-components/Footer';\nimport { useAdsContext } from '../contexts/AdsProvider';\nimport { useMainContext } from '../contexts/MainProvider';\nimport { useUserContext } from '../contexts/UserProvider';\nimport useScript from '../hooks/useScript';\nimport { url_for_advertise } from '../utils/constants';\n\nconst Home = () => {\n  useScript(url_for_advertise);\n  const {\n    toggleNavbarFunc,\n    closeSubmenu,\n    closeSearch,\n    fetchLocationIp,\n    countryName,\n    cityName,\n  } = useMainContext();\n  const { fetchAllAds, fetchCityAds, fetchFavouriteIds, turnToFree } =\n    useAdsContext();\n  const { token } = useUserContext();\n  useEffect(() => {\n    toggleNavbarFunc(false);\n    closeSubmenu(false);\n    closeSearch();\n    window.scrollTo(0, 0);\n  }, []);\n  // useEffect(() => {\n  //   token && fetchFavouriteIds();\n  // }, [token]);\n\n  // useEffect(() => {\n  //   if (countryName) {\n  //     fetchAllAds(countryName, 1);\n  //   } else if (cityName) {\n  //     fetchCityAds(cityName, 1);\n  //   } else {\n  //     fetchLocationIp();\n  //   }\n  // }, [countryName, cityName]);\n\n  return (\n    <main className='home'>\n      <HomeAds />\n      <Footer />\n    </main>\n  );\n};\nexport default Home;\n"],"names":["_ref","id","title","price","location","created_at","User","AdWatch","a","_slicedToArray","advertisement_attachements","grid","_ref$prevLink","prevLink","cover_photo","_useAdsContext","useAdsContext","favAdsIds","token","handleFavouriteAd","currency","useMainContext","_useState","useState","_useState2","today","Date","d","getFullYear","getMonth","getDate","navigate","useNavigate","renderedPrice","toLocaleString","_jsx","className","children","_jsxs","files","split","pop","includes","Link","to","concat","state","pathname","style","backgroundImage","image_url","backgroundSize","src","alt","loading","controls","video_url","image","name","length","slice","onClick","e","target","classList","contains","pin","view","heart2","heart","url","useEffect","script","document","createElement","async","body","appendChild","removeChild","countryName","dispatch","allAds","currentPage","lastPagePaidPackage","isSpecial","lastPageSpecial","lastPage","turnToSpecial2","isFree","isPaidPackage","turnToPaidPackage2","turnToFree2","fetchMoreAds","moreAdsLoading","special","setSpecial","_useState3","_useState4","paid","setPaid","_useState5","_useState6","free","setFree","_useState7","_useState8","_useQuery","useQuery","axios","get","premium_ads_url","then","data","console","log","type","GET_ALLADS_SUCCESS","payload","payload2","meta","last_page","staleTime","load","isLoading","err","isError","prem","_useQuery2","error","special_ads_url","GET_MORE_ADS","enabled","load2","err2","sp","_useQuery3","paid_package_url","load3","err3","pa","_useQuery4","response","allAdsUrl","load4","err4","fr","Loading","allfree","_Fragment","map","ad","index","_createElement","Ad","_objectSpread","key","useScript","url_for_advertise","_useMainContext","toggleNavbarFunc","closeSubmenu","closeSearch","fetchLocationIp","cityName","fetchAllAds","fetchCityAds","fetchFavouriteIds","turnToFree","useUserContext","window","scrollTo","HomeAds","Footer"],"sourceRoot":""}